(function(n){n.piroBox_ext=function(t){function ut(){n(window).scroll(function(){var t=n(window).height(),i=n(window).width(),u=r.height()-20,f=r.width();r.css({left:i/2-f/2+"px",top:parseInt(n(document).scrollTop())+(t-u)/2+v})})}function it(){n(".piro_close").is(":visible")&&(n(".zoomIn").add(".zoomOut").add(".my_frame").add(".caption").remove(),r.add(i).add(e).stop(),t.piro_drag==!0&&r.draggable({disabled:!1}),r.add(a).piroFadeOut(200,function(){i.html("");h.hide();c.hide();a.add(r).hide().css("visibility","visible");n("iframe").css("visibility","inherit")}))}var p,d,s,nt,y,tt,g,v;for(t=n.extend({piro_speed:700,bg_alpha:.9,piro_scroll:!0,piro_drag:null,piro_nav_pos:"top"},t),n.fn.piroFadeIn=function(t,i){n(this).fadeIn(t,function(){i!=undefined&&i()})},n.fn.piroFadeOut=function(t,i){n(this).fadeOut(t,function(){i!=undefined&&i()})},p=n('a[class*="pirobox"]'),d={},s=0;s<p.length;s++)nt=n(p[s]),d["a."+nt.attr("class").match(/^pirobox_gall\w*/)]=0;y=[];for(tt in d)y.push(tt);for(s=0;s<y.length;s++)n(y[s]+":first").addClass("first"),n(y[s]+":last").addClass("last");g=n(p);n('a[class*="pirobox_gall"]').each(function(n){this.rev=n+0});n('a[class*="pirobox_gall"]').length==1&&n('a[class*="pirobox_gall"]').each(function(){n(this).addClass("single_fix")});var rt='<div class="caption"><\/div>',w=.9;n("body").append('<div class="piro_overlay"><\/div><table class="piro_html"  cellpadding="0" cellspacing="0"><tr><td class="h_t_l"><\/td><td class="h_t_c" title="drag me!!"><\/td><td class="h_t_r"><\/td><\/tr><tr><td class="h_c_l"><\/td><td class="h_c_c"><div class="piro_loader" title="close"><span><\/span><\/div><div class="resize"><div class="nav_container"><a href="#prev" class="piro_prev" title="previous"><\/a><a href="#next" class="piro_next" title="next"><\/a><div class="piro_prev_fake">prev<\/div><div class="piro_next_fake">next<\/div><div class="piro_close" title="close"><\/div><\/div><div class="div_reg"><\/div><\/div><\/td><td class="h_c_r"><\/td><\/tr><tr><td class="h_b_l"><\/td><td class="h_b_c"><\/td><td class="h_b_r"><\/td><\/tr><\/table>');var r=n(".piro_html"),a=n(".piro_overlay"),c=n(".nav_container"),u=n(".piro_next"),f=n(".piro_prev"),b=n(".piro_next_fake"),k=n(".piro_prev_fake"),o=n(".piro_close"),i=n(".div_reg"),h=n(".piro_loader"),e=n(".resize"),l=n(window).width();c.hide().css(t.piro_nav_pos,"-38px");t.piro_nav_pos=="top"?v=5:t.piro_nav_pos=="bottom"&&(v=-30);r.css({left:l/2-250+"px",top:parseInt(n(document).scrollTop())+100});n(r).add(a).hide();a.css({opacity:t.bg_alpha});n(f).add(u).bind("click",function(t){c.hide();n(".caption").remove();n(".zoomIn").add(".zoomOut").remove();t.preventDefault();u.add(f).hide();var i=parseInt(n('a[class*="pirobox_gall"]').filter(".item").attr("rev")),r=n(this).is(".piro_prev")?n('a[class*="pirobox_gall"]').eq(i-1):n('a[class*="pirobox_gall"]').eq(i+1);r.click()});n("html").bind("keyup",function(t){t.keyCode==27&&(t.preventDefault(),n(o).is(":visible")&&it())});n("html").bind("keyup",function(t){n(".item").is(".first")||(n(".item").attr("rel")=="single"?c.show():t.keyCode==37&&(t.preventDefault(),n(o).is(":visible")&&f.click()))});n("html").bind("keyup",function(t){n(".item").is(".last")||(n(".item").attr("rel")=="single"?c.show():t.keyCode==39&&(t.preventDefault(),n(o).is(":visible")&&u.click()))});n(window).resize(function(){var t=n(window).height(),i=n(window).width(),u=r.height(),f=r.width();r.css({left:i/2-f/2+"px",top:parseInt(n(document).scrollTop())+(t-u)/2+v})});t.piro_scroll==!0&&ut();n(g).each(function(){function d(){function d(){n(".caption").remove();s[1]=="full"&&s[2]=="full"&&(s[2]=n(window).height()-70,s[1]=n(window).width()-55);var h=n(window).height();l=n(window).width();o.hide();i.add(e).animate({height:+s[2]+"px",width:+s[1]+"px"},t.piro_speed).css("visibility","visible");r.animate({height:+s[2]+20+"px",width:+s[1]+20+"px",left:l/2-(s[1]/2+10)+"px",top:parseInt(n(document).scrollTop())+(h-s[2])/2+v},t.piro_speed,function(){u.add(f).add(k).add(b).css("visibility","visible");c.show();o.show()})}function g(){c.add(".caption").hide();p==""?n(".caption").remove():n(rt).appendTo(e);var s=new Image;s.onerror=function(){n(".caption").remove()};s.onload=function(){var tt=s.height,it=s.width,d=n(window).height(),a,y,g,nt;l=n(window).width();a=s.height;y=s.width;a+20>d||y+20>l?(g=(y+20)/l,nt=(a+20)/d,nt>g?(y=Math.round(s.width*(w/nt)),a=Math.round(s.height*(w/nt))):(y=Math.round(s.width*(w/g)),a=Math.round(s.height*(w/g))),n(".zoomIn").add(".zoomOut").remove(),n(".h_c_c").append('<a href="#" class="zoomIn" title="">zoomIn<\/a>'),n(".zoomIn,.zoomOut").hide()):(a=s.height,y=s.width,n(".zoomIn").add(".zoomOut").remove());d=n(window).height();l=n(window).width();n(s).height(a).width(y).hide();n(".div_reg img").remove();n(".div_reg").html("");i.append(s).show();n(s).addClass("immagine");t.piro_drag==!0&&(n(".immagine,.h_b_c,.h_t_c").css("cursor","move"),r.draggable({handle:".h_t_c,.h_b_c,.div_reg img",opacity:.8}));i.add(e).animate({height:a+"px",width:y+"px"},t.piro_speed);r.animate({height:a+20+"px",width:y+20+"px",left:l/2-(y+20)/2+"px",top:parseInt(n(document).scrollTop())+(d-a)/2+v},t.piro_speed,function(){h.hide();var l=e.width();n(".caption").css({width:l+"px"});n(".caption").html("<p>"+p+"<\/p>").hide();n(s).fadeIn(300,function(){n(window).scroll(function(){n(".zoomOut").is(":visible")&&n(s).animate({width:y,height:a,top:0,left:0},600,function(){n(".immagine").css("cursor","auto");n(s).draggable({disabled:!0});n(".zoomIn").add(".zoomOut").remove();n(".h_c_c").append('<a href="#" class="zoomIn" title="">zoomIn<\/a>');n(".zoomIn").show()})});n(".zoomOut").on("click",function(i){i.preventDefault();n(".immagine").css("cursor","auto");t.piro_drag==!0&&r.draggable({disabled:!1});n(s).draggable({disabled:!0});n(".zoomIn").add(".zoomOut").remove();n(".h_c_c").append('<a href="#" class="zoomIn" title="">zoomIn<\/a>');n(".zoomIn").show();n(s).animate({width:y,height:a,top:0,left:0},600)});n(".zoomIn").on("click",function(u){u.preventDefault();n(".zoomIn").add(".zoomOut").remove();n(".h_c_c").append('<a href="#" class="zoomOut" title="">zoomOut<\/a>');n(".zoomOut").show();t.piro_drag==!0&&r.draggable({disabled:!0});n(s).draggable({disabled:!1});n(s).animate({width:it,height:tt,top:-(tt-a)/2,left:-(it-y)/2},600,function(){var t=i.offset(),r=t.left+y-it,u=t.top+a-tt,f=t.left,e=t.top;n(s).draggable({containment:[r,u,f,e],scrollSpeed:400});n(".immagine").css("cursor","move")})});n(".zoomIn").show();o.show();n(".caption").slideDown(200);u.add(f).add(k).add(b).css("visibility","visible");c.show();e.resize(function(){var t=s.width;n(".caption").css({width:t+"px"})})})})};s.src=y;h.click(function(){s.src="about:blank"})}n("iframe").css("visibility","hidden");r.add(a).add(i).add(h).show();switch(s[0]){case"iframe":n(".zoomIn").add(".zoomOut").remove();i.html("").css("overflow","hidden");e.css("overflow","hidden");o.hide();d();i.piroFadeIn(300,function(){i.append('<iframe id="my_frame" class="my_frame" src="'+y+'" frameborder="0" allowtransparency="true" scrolling="auto" align="top"><\/iframe>');n(".my_frame").css({height:+s[2]+"px",width:+s[1]+"px"});h.hide()});break;case"content":n(".zoomIn").add(".zoomOut").remove();i.html("").css("overflow","auto");e.css("overflow","auto");n(".my_frame").remove();o.hide();d();i.piroFadeIn(300,function(){i.load(y);h.hide()});break;case"inline":n(".zoomIn").add(".zoomOut").remove();i.html("").css("overflow","auto");e.css("overflow","auto");n(".my_frame").remove();o.hide();d();i.piroFadeIn(300,function(){n(y).clone(!0).appendTo(i).piroFadeIn(300);h.hide()});break;case"flash":n(".zoomIn").add(".zoomOut").remove();n(".my_frame").remove();i.html("").css("overflow","hidden");d();var nt='<object  width="'+s[1]+'" height="'+s[2]+'"><param name="movie" value="'+y+'" /><param name="wmode" value="transparent" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="menu" value="false" /><embed src="'+y+'" type="application/x-shockwave-flash" allowscriptaccess="always" menu="false" wmode="transparent" allowfullscreen="true" width="'+s[1]+'" height="'+s[2]+'"><\/embed><\/object>';i.piroFadeIn(300,function(){n(nt).appendTo(i);h.hide()});break;case"gallery":i.css("overflow","hidden");e.css("overflow","hidden");n(".my_frame").remove();g();break;case"single":n(".my_frame").remove();i.html("").css("overflow","hidden");e.css("overflow","hidden");g()}}var p=n(this).attr("title"),s=n(this).attr("rel").split("-"),y=n(this).attr("href");n(this).unbind();n(this).bind("click",function(i){a.css({opacity:t.bg_alpha});i.preventDefault();u.add(f).hide().css("visibility","hidden");n(g).filter(".item").removeClass("item");n(this).addClass("item");d();n(this).is(".first")?(f.hide(),u.show(),k.show().css({visibility:"hidden"})):(u.add(f).show(),b.add(k).hide());n(this).is(".last")&&(f.show(),b.show().css({visibility:"hidden"}),u.hide());(n(this).is(".pirobox")||n(this).is(".single_fix"))&&u.add(f).hide();n(this).is(".last")&&n(this).is(".first")&&u.add(f).hide()})});n(".immagine").on("click",function(){n(".caption").slideToggle(200)});o.add(h).add(a).bind("click",function(n){n.preventDefault();it()})}})(jQuery);
/*
//# sourceMappingURL=pirobox.min.js.map
*/